/* CSS Layers for proper cascade management */
@layer base, themes;

@layer base {
  :root {
    /* Container constraint */
    --app-container-max-width: 1400px;

    /* Primary and secondary colors as HEX - easy to work with */
    --color-primary: #0fce42;
    --color-secondary: #900cdc;

    /* Surface lightness values for theme switching */
    --surface-lightness: 98%;
    --surface-secondary-lightness: 95%;
    --text-lightness: 15%;
    --text-secondary-lightness: 45%;
  }
}

@layer themes {
  :root {
    /* Derived colors using color-mix from hex values */
    --color-primary-hover: color-mix(in oklch, var(--color-primary) 85%, black);
    --color-primary-active: color-mix(
      in oklch,
      var(--color-primary) 70%,
      black
    );

    --color-secondary-hover: color-mix(
      in oklch,
      var(--color-secondary) 85%,
      black
    );
    --color-secondary-active: color-mix(
      in oklch,
      var(--color-secondary) 70%,
      black
    );

    /* Surface colors using OKLCH */
    --color-background: oklch(var(--surface-lightness) 0.005 280);
    --color-surface: oklch(var(--surface-secondary-lightness) 0.01 280);

    /* Text colors using OKLCH */
    --color-text: oklch(var(--text-lightness) 0.02 280);
    --color-text-muted: oklch(var(--text-secondary-lightness) 0.03 280);

    /* Border colors using color-mix */
    --color-border: color-mix(in oklch, var(--color-text) 15%, transparent);
    --color-border-light: color-mix(
      in oklch,
      var(--color-text) 8%,
      transparent
    );
  }

  /* Dark theme */
  [data-theme='dark'] {
    /* Invert lightness values for dark theme */
    --surface-lightness: 12%;
    --surface-secondary-lightness: 18%;
    --text-lightness: 90%;
    --text-secondary-lightness: 65%;

    --color-primary-hover: color-mix(in oklch, var(--color-primary) 85%, white);
    --color-primary-active: color-mix(
      in oklch,
      var(--color-primary) 85%,
      black
    );

    --color-secondary-hover: color-mix(
      in oklch,
      var(--color-secondary) 85%,
      white
    );
    --color-secondary-active: color-mix(
      in oklch,
      var(--color-secondary) 85%,
      black
    );

    /* Surface colors using OKLCH */
    --color-background: oklch(var(--surface-lightness) 0.01 280);
    --color-surface: oklch(var(--surface-secondary-lightness) 0.015 280);

    /* Text colors using OKLCH */
    --color-text: oklch(var(--text-lightness) 0.02 280);
    --color-text-muted: oklch(var(--text-secondary-lightness) 0.03 280);

    /* Borders need higher opacity in dark mode */
    --color-border: color-mix(in oklch, var(--color-text) 20%, transparent);
    --color-border-light: color-mix(
      in oklch,
      var(--color-text) 12%,
      transparent
    );
  }
}
